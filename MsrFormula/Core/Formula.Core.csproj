<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProjectGuid>{1B5724EC-FFF1-48D7-A700-AD46F0150AFC}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Core</RootNamespace>
    <AssemblyName>Formula.Core</AssemblyName>
    <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <GPLexPath>..\..\Ext\GPLEX</GPLexPath>
    <GPPGPath>..\..\Ext\GPPG</GPPGPath>
    <CodeContractsAssemblyMode>1</CodeContractsAssemblyMode>
    <TargetFrameworkProfile />
  </PropertyGroup>
  <PropertyGroup>
    <SignAssembly>false</SignAssembly>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Debug|x86'">
    <DebugSymbols>true</DebugSymbols>
    <OutputPath>bin\x86\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <DebugType>full</DebugType>
    <PlatformTarget>x86</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisRuleSet>AllRules.ruleset</CodeAnalysisRuleSet>
    <CodeContractsEnableRuntimeChecking>True</CodeContractsEnableRuntimeChecking>
    <CodeContractsRuntimeOnlyPublicSurface>False</CodeContractsRuntimeOnlyPublicSurface>
    <CodeContractsRuntimeThrowOnFailure>False</CodeContractsRuntimeThrowOnFailure>
    <CodeContractsRuntimeCallSiteRequires>False</CodeContractsRuntimeCallSiteRequires>
    <CodeContractsRuntimeSkipQuantifiers>False</CodeContractsRuntimeSkipQuantifiers>
    <CodeContractsRunCodeAnalysis>False</CodeContractsRunCodeAnalysis>
    <CodeContractsNonNullObligations>True</CodeContractsNonNullObligations>
    <CodeContractsBoundsObligations>True</CodeContractsBoundsObligations>
    <CodeContractsArithmeticObligations>False</CodeContractsArithmeticObligations>
    <CodeContractsEnumObligations>False</CodeContractsEnumObligations>
    <CodeContractsRedundantAssumptions>False</CodeContractsRedundantAssumptions>
    <CodeContractsMissingPublicRequiresAsWarnings>True</CodeContractsMissingPublicRequiresAsWarnings>
    <CodeContractsInferRequires>True</CodeContractsInferRequires>
    <CodeContractsInferEnsures>False</CodeContractsInferEnsures>
    <CodeContractsInferObjectInvariants>False</CodeContractsInferObjectInvariants>
    <CodeContractsSuggestAssumptions>False</CodeContractsSuggestAssumptions>
    <CodeContractsSuggestRequires>True</CodeContractsSuggestRequires>
    <CodeContractsSuggestEnsures>False</CodeContractsSuggestEnsures>
    <CodeContractsSuggestObjectInvariants>False</CodeContractsSuggestObjectInvariants>
    <CodeContractsRunInBackground>True</CodeContractsRunInBackground>
    <CodeContractsShowSquigglies>True</CodeContractsShowSquigglies>
    <CodeContractsUseBaseLine>False</CodeContractsUseBaseLine>
    <CodeContractsEmitXMLDocs>False</CodeContractsEmitXMLDocs>
    <CodeContractsCustomRewriterAssembly>
    </CodeContractsCustomRewriterAssembly>
    <CodeContractsCustomRewriterClass>
    </CodeContractsCustomRewriterClass>
    <CodeContractsLibPaths>
    </CodeContractsLibPaths>
    <CodeContractsExtraRewriteOptions>
    </CodeContractsExtraRewriteOptions>
    <CodeContractsExtraAnalysisOptions>
    </CodeContractsExtraAnalysisOptions>
    <CodeContractsSQLServerOption>
    </CodeContractsSQLServerOption>
    <CodeContractsBaseLineFile>
    </CodeContractsBaseLineFile>
    <CodeContractsCacheAnalysisResults>True</CodeContractsCacheAnalysisResults>
    <CodeContractsFailBuildOnWarnings>False</CodeContractsFailBuildOnWarnings>
    <CodeContractsRuntimeCheckingLevel>Full</CodeContractsRuntimeCheckingLevel>
    <CodeContractsReferenceAssembly>%28none%29</CodeContractsReferenceAssembly>
    <CodeContractsAnalysisWarningLevel>0</CodeContractsAnalysisWarningLevel>
    <WarningLevel>4</WarningLevel>
    <Optimize>false</Optimize>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'Release|x86'">
    <OutputPath>bin\x86\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <PlatformTarget>x86</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Numerics" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
    <Reference Include="Microsoft.Z3">
      <HintPath>..\..\packages\z3-4.3.2-x86-macosx\Microsoft.Z3.dll</HintPath>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <Compile Include="API\ASTQueries\ASTSchema.cs" />
    <Compile Include="API\ASTQueries\Constants.cs" />
    <Compile Include="API\ASTQueries\NodePred.cs" />
    <Compile Include="API\ASTQueries\NodePredFactory.cs" />
    <Compile Include="API\ASTQueries\NodePredFalse.cs" />
    <Compile Include="API\ASTQueries\NodePredOr.cs" />
    <Compile Include="API\ASTQueries\NodePredStar.cs" />
    <Compile Include="API\Base\AST.cs" />
    <Compile Include="API\Base\ASTComputation2.cs" />
    <Compile Include="API\Base\ASTComputationUpDown.cs" />
    <Compile Include="API\Base\ASTConcr.cs" />
    <Compile Include="API\ASTQueries\NodePredAtom.cs" />
    <Compile Include="API\Base\Builder.cs" />
    <Compile Include="API\Base\BuilderRef.cs" />
    <Compile Include="API\Base\CompositeLocator.cs" />
    <Compile Include="API\Base\Constants.cs" />
    <Compile Include="API\Base\ASTComputationBase.cs" />
    <Compile Include="API\Base\Env.cs" />
    <Compile Include="API\Base\EnvParams.cs" />
    <Compile Include="API\Base\ModelFactLocator.cs" />
    <Compile Include="API\Base\Factory.cs" />
    <Compile Include="API\Base\Flag.cs" />
    <Compile Include="API\Base\ChildInfo.cs" />
    <Compile Include="API\Base\IInternalClonable.cs" />
    <Compile Include="API\Base\Locator.cs" />
    <Compile Include="API\Base\NodeTermLocator.cs" />
    <Compile Include="API\Base\ProgramName.cs" />
    <Compile Include="API\Base\ProofTree.cs" />
    <Compile Include="API\Generators\CSharpAlias.cs" />
    <Compile Include="API\Generators\CSharpDataModelGen.cs" />
    <Compile Include="API\Generators\GeneratorOptions.cs" />
    <Compile Include="API\Generators\ICSharpTerm.cs" />
    <Compile Include="API\Plugins\ISearchStrategy.cs" />
    <Compile Include="API\Plugins\SourcePositioner.cs" />
    <Compile Include="API\Results\ApplyResult.cs" />
    <Compile Include="API\Results\GenerateResult.cs" />
    <Compile Include="API\Results\ObjectGraphResult.cs" />
    <Compile Include="API\Results\QueryResult.cs" />
    <Compile Include="API\Results\SolveResult.cs" />
    <Compile Include="Common\Extras\BitMethods.cs" />
    <Compile Include="Common\Extras\Z3Utilities.cs" />
    <Compile Include="Common\FixedDomMap.cs" />
    <Compile Include="Common\Rules\ActivationStatistics.cs" />
    <Compile Include="Common\Rules\CoreSubRule.cs" />
    <Compile Include="Common\Terms\SubtermMatcher.cs" />
    <Compile Include="Common\Terms\TermPrinting.cs" />
    <Compile Include="Solver\Execution\DecisionStack.cs" />
    <Compile Include="Solver\Execution\SymFixpoint.cs" />
    <Compile Include="Solver\Execution\ShapeTrie.cs" />
    <Compile Include="Solver\Execution\SymElement.cs" />
    <Compile Include="Solver\Execution\SymExecuter.cs" />
    <Compile Include="Solver\Execution\Activation.cs" />
    <Compile Include="Solver\Execution\TermEncIndex.cs" />
    <Compile Include="Solver\Cardinality.cs" />
    <Compile Include="Solver\CardSystem.cs" />
    <Compile Include="Common\Composites\CoreTSystem.cs" />
    <Compile Include="Common\Composites\StepResultMap.cs" />
    <Compile Include="Common\Composites\StepResult.cs" />
    <Compile Include="Common\EquivalenceRelation.cs" />
    <Compile Include="Common\Extras\MessageHelpers.cs" />
    <Compile Include="Common\IntIntervals.cs" />
    <Compile Include="Common\LiftedBool.cs" />
    <Compile Include="Common\LiftedInt.cs" />
    <Compile Include="Common\LiftedRational.cs" />
    <Compile Include="Common\MutableTuple.cs" />
    <Compile Include="Common\Rational.cs" />
    <Compile Include="API\Base\Span.cs" />
    <Compile Include="API\Base\Printing.cs" />
    <Compile Include="API\Nodes\ModelFact.cs" />
    <Compile Include="API\Plugins\IQuoteParser.cs" />
    <Compile Include="API\Plugins\QuoteStream.cs" />
    <Compile Include="API\Nodes\Compr.cs" />
    <Compile Include="API\Nodes\Setting.cs" />
    <Compile Include="API\Base\ASTComputation.cs" />
    <Compile Include="API\Base\ASTEnumerator.cs" />
    <Compile Include="API\Results\RenderResult.cs" />
    <Compile Include="Common\Extras\CompiledNodeMethods.cs" />
    <Compile Include="Common\Rules\Derivation.cs" />
    <Compile Include="Common\Rules\ExecuterStatistics.cs" />
    <Compile Include="Common\Rules\Executer.cs" />
    <Compile Include="Common\Rules\CoreRule.cs" />
    <Compile Include="Common\Rules\FindData.cs" />
    <Compile Include="Common\Rules\Bindable.cs" />
    <Compile Include="Common\Rules\Matcher.cs" />
    <Compile Include="Common\Rules\RuleTable.cs" />
    <Compile Include="Common\Rules\Unifier.cs" />
    <Compile Include="Common\Symbols\OpLibrary.cs" />
    <Compile Include="Common\Symbols\SizeExpr.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\BaseCnstSymb.cs" />
    <Compile Include="Common\Symbols\Constants.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\BaseOpSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\ConSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\MapSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\UnnSortSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\UnnSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\UserCnstSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\UserSortSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\UserSymbol.cs" />
    <Compile Include="Common\Symbols\Namespace.cs" />
    <Compile Include="Common\Symbols\SymbolTypes\BaseSortSymb.cs" />
    <Compile Include="Common\Symbols\SymbolTable.cs" />
    <Compile Include="Common\Symbols\Symbol.cs" />
    <Compile Include="Common\SuccessToken.cs" />
    <Compile Include="Common\Terms\AppFreeCanUnn.cs" />
    <Compile Include="Common\Terms\BinnedUnion.cs" />
    <Compile Include="Common\Terms\Term.cs" />
    <Compile Include="Common\Terms\TermIndex.cs" />
    <Compile Include="Common\ByteMap.cs" />
    <Compile Include="Common\Terms\TermState.cs" />
    <Compile Include="Common\Terms\TypeEnvironment.cs" />
    <Compile Include="Compiler\Action.cs" />
    <Compile Include="Compiler\ActionSet.cs" />
    <Compile Include="Compiler\ComprehensionData.cs" />
    <Compile Include="Compiler\Configuration.cs" />
    <Compile Include="API\Results\InstallStatus.cs" />
    <Compile Include="API\Nodes\TSystem.cs" />
    <Compile Include="Common\DependencyCollection.cs" />
    <Compile Include="Common\Extras\EnumerableMethods.cs" />
    <Compile Include="Common\ImmutableArray.cs" />
    <Compile Include="Common\ImmutableCollection.cs" />
    <Compile Include="Common\Impossible.cs" />
    <Compile Include="API\Nodes\Body.cs" />
    <Compile Include="API\Nodes\CardPair.cs" />
    <Compile Include="API\Nodes\Cnst.cs" />
    <Compile Include="API\Nodes\ConDecl.cs" />
    <Compile Include="API\Nodes\Config.cs" />
    <Compile Include="API\Nodes\ContractItem.cs" />
    <Compile Include="API\Nodes\FuncTerm.cs" />
    <Compile Include="API\Nodes\Domain.cs" />
    <Compile Include="API\Nodes\Enum.cs" />
    <Compile Include="API\Nodes\Field.cs" />
    <Compile Include="API\Nodes\Folder.cs" />
    <Compile Include="API\Nodes\Id.cs" />
    <Compile Include="API\Nodes\Machine.cs" />
    <Compile Include="API\Nodes\MapDecl.cs" />
    <Compile Include="API\Nodes\ModApply.cs" />
    <Compile Include="API\Nodes\Model.cs" />
    <Compile Include="API\Nodes\ModRef.cs" />
    <Compile Include="API\Nodes\Node.cs" />
    <Compile Include="API\Nodes\Param.cs" />
    <Compile Include="API\Nodes\Find.cs" />
    <Compile Include="API\Nodes\Program.cs" />
    <Compile Include="API\Nodes\Property.cs" />
    <Compile Include="API\Nodes\Quote.cs" />
    <Compile Include="API\Nodes\QuoteRun.cs" />
    <Compile Include="API\Nodes\Range.cs" />
    <Compile Include="API\Nodes\RelConstr.cs" />
    <Compile Include="API\Nodes\Rule.cs" />
    <Compile Include="API\Nodes\Step.cs" />
    <Compile Include="API\Nodes\Transform.cs" />
    <Compile Include="API\Nodes\Union.cs" />
    <Compile Include="API\Nodes\UnnDecl.cs" />
    <Compile Include="API\Nodes\Update.cs" />
    <Compile Include="API\Parser\Parser.cs" />
    <Compile Include="API\Results\InstallResult.cs" />
    <Compile Include="API\Results\ParseResult.cs" />
    <Compile Include="API\Results\ReloadResult.cs" />
    <Compile Include="API\Parser\ShiftReduceParserCode.cs" />
    <Compile Include="Common\Map.cs" />
    <Compile Include="Common\Set.cs" />
    <Compile Include="Common\Unit.cs" />
    <Compile Include="Compiler\Compiler.cs" />
    <Compile Include="Compiler\FactSet.cs" />
    <Compile Include="Compiler\Location.cs" />
    <Compile Include="Compiler\Loader.cs" />
    <Compile Include="Compiler\ModuleData.cs" />
    <Compile Include="Compiler\Optimizer.cs" />
    <Compile Include="Compiler\Renderer.cs" />
    <Compile Include="Compiler\ConstraintSystem.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="Solver\CardRange.cs" />
    <Compile Include="Solver\ISolver.cs" />
    <Compile Include="Solver\OldPrinter.cs" />
    <Compile Include="Solver\SearchState.cs" />
    <Compile Include="Solver\Solver.cs" />
    <Compile Include="Solver\Strategies\OATStrategy.cs" />
    <Compile Include="Solver\TypeEmbedding\ConstructorEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\EnumEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\IntegerEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\IntRangeEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\ITypeEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\NaturalEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\NegIntegerEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\PosIntegerEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\RealEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\SingletonEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\StringEmbedding.cs" />
    <Compile Include="Solver\TypeEmbedding\TypeEmbedder.cs" />
    <Compile Include="Solver\TypeEmbedding\UnionEmbedding.cs" />
  </ItemGroup>
  <ItemGroup>
    <MPLexCompile Include="API\Parser\lexer.lex" />
    <MPPGCompile Include="API\Parser\parser.y" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <!--
    =======================================================================================================
                                       Generate code from LEX files
    =======================================================================================================
  -->
  <PropertyGroup>
    <!--Make sure that the lexer runs before the C# compiler-->
    <CoreCompileDependsOn>$(CoreCompileDependsOn);GenerateCodeFromLex</CoreCompileDependsOn>
  </PropertyGroup>
  <Target Name="GenerateCodeFromLex" Condition="'$(BuildingProject)'!='false'" Inputs="@(MPLexCompile);$(LexFrameFile)" Outputs="@(MPLexCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs')" DependsOnTargets="$(GenerateCodeFromLexDependsOn)">
    <!--Run the command line tool that generates the cs files.-->
    <Exec Command="&quot;$(GPLexPath)\GPLex45.exe&quot; /babel /parser /unicode /out:@(MPLexCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs') @(MPLexCompile)" />
    <!--Add the generated files to the list of the files to compile.-->
    <CreateItem Include="@(MPLexCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs')">
      <Output TaskParameter="Include" ItemName="Compile" />
      <Output TaskParameter="Include" ItemName="FileWrites" />
    </CreateItem>
  </Target>
  <!--
    =======================================================================================================
                                      Generate parser code from Y files
    =======================================================================================================
  -->
  <PropertyGroup>
    <GenerateParserCodeFromGrammarDependsOn>$(GenerateParserCodeFromGrammarDependsOn)</GenerateParserCodeFromGrammarDependsOn>
    <CoreCompileDependsOn>$(CoreCompileDependsOn);GenerateParserCodeFromGrammar</CoreCompileDependsOn>
  </PropertyGroup>
  <Target Name="GenerateParserCodeFromGrammar" Condition="'$(BuildingProject)'!='false'" Inputs="@(MPPGCompile)" Outputs="@(MPPGCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs')" DependsOnTargets="$(GenerateParserCodeFromGrammarDependsOn)">
    <!--Run the command line tool that generates the cs files.-->
    <Exec Command="&quot;$(GPPGPath)\GPPG45.exe&quot; -babel  -report -verbose -conflicts @(MPPGCompile) &gt; @(MPPGCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs')" />
    <!--Add the generated files to the list of the files to compile.-->
    <CreateItem Include="@(MPPGCompile-&gt;'$(IntermediateOutputPath)%(FileName).g.cs')">
      <Output TaskParameter="Include" ItemName="Compile" />
      <Output TaskParameter="Include" ItemName="FileWrites" />
    </CreateItem>
  </Target>
  <ItemGroup>
    <None Include="libz3.dylib">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Microsoft.Z3.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="Microsoft.Z3.dll.config">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
    <None Include="libz3.dll">
      <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </None>
  </ItemGroup>
</Project>